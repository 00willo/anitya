{% extends "master.html" %}

{% block body %}

<div class="page-header">
  <h1>Project: {{ project.name }}</h1>
</div>

<div class="row">
  <div class="col-md-5">

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">
            {{ project.name }}
        </h3>
      </div>

      <span class="list-group-item">
        <p class="list-group-item-text">
          <dl class="dl-horizontal">
            <table class="table table-condensed">
              <tr>
                <td>Homepage</td>
                <td>
                  <a href="{{ project.homepage }}" target="_blank">
                    {{ project.homepage }}
                  </a>
                </td>
              </tr>
              <tr>
                <td>Version URL</td>
                <td>
                  {% if '://' in project.version_url %}
                  <a href="{{ project.version_url }}" target="_blank">
                    {{ project.version_url }}
                  </a>
                  {% else %}
                  {{ project.version_url }}
                  {% endif %}
                </td>
              </tr>
              <tr>
                <td>Regex</td>
                <td>{{ project.regex }}</td>
              </tr>
              {% for package in project.packages %}
              <tr>
                <td>{{ package.distro }} name</td>
                <td>{{ package.package_name }}</td>
              </tr>
              {% endfor %}

            </table>
          </dl>
        </p>
        {% if g.auth.logged_in %}
        <p class="pull-right">
           <a href="{{ url_for('map_project', project_name=project.name) }}">
            <button type="submit" class="btn btn-info">
              <span class="glyphicon glyphicon-map-marker"></span>
              Map in a distribution
            </button>
          </a>
          <a href="{{ url_for('edit_project', project_name=project.name) }}">
            <button type="submit" class="btn btn-info">
              <span class="glyphicon glyphicon-edit"></span>
              Edit
            </button>
          </a>
          <a href="{{ url_for('delete_project', project_name=project.name) }}">
            <button type="submit" class="btn btn-danger">
              <span class="glyphicon glyphicon-remove"></span>
              Delete
            </button>
          </a>
        </p>
        {% endif %}
        <div class="clearfix"></div>
      </span>
    </div>

    <div class="panel panel-heading">
      <p class="panel-title">
        {% if project.version %}
        Latest version: {{ project.version }}
        {% else %}
        No version available for this package
        {% endif %}
      </p>
    </div>

  </div>
</div>

<div class="row">
  <div class="col-md-5">

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">
            Logs
        </h3>
      </div>
      <span class="list-group-item">
        <p class="list-group-item-text">
          <dl class="dl-horizontal">
            {{ project.logs }}
          </dl>
        </p>
        <div class="clearfix"></div>
      </span>
    </div>

  </div>
</div>

{% endblock %}
